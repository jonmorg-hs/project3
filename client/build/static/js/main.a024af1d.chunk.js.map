{"version":3,"sources":["utils/mutations.js","utils/auth.js","components/SignupForm.js","components/LoginForm.js","utils/syncdata.js","utils/worksheet.js","utils/uploaddata.js","utils/installpwa.js","utils/uploadcsv.js","components/Navbar.js","App.js","index.js"],"names":["LOGIN_USER","gql","ADD_USER","decode","this","getToken","token","isTokenExpired","exp","Date","now","window","login","document","getElementById","className","err","localStorage","getItem","idToken","setItem","location","assign","removeItem","SignupForm","useState","username","email","password","userFormData","setUserFormData","validated","showAlert","setShowAlert","useMutation","addUser","error","data","useEffect","handleInputChange","event","target","name","value","handleFormSubmit","a","preventDefault","currentTarget","checkValidity","stopPropagation","console","log","variables","Auth","Form","noValidate","onSubmit","Alert","dismissible","onClose","show","variant","Group","Label","htmlFor","Control","type","placeholder","onChange","required","Feedback","Button","disabled","LoginForm","$","ajax","url","dataType","async","success","text","syncData","alert","geojson","req","store","db","transaction","objectStore","clear","add","e","onsuccess","evt","onerror","workSheet","DB_STORE_NAME","getAll","holedata","result","html","i","length","depth","collar","toe","toFixed","difference","dipped","bgcolor","id","hole","bind","hid","attr","substr","get","holeObj","val","put","uploadData","installPWA","butInstall","promptEvent","deferredPrompt","prompt","userChoice","style","display","uploadCSV","AppNavbar","showModal","setShowModal","React","addEventListener","Navbar","expand","Container","fluid","Toggle","aria-controls","Collapse","Nav","loggedIn","Link","onClick","logout","Modal","size","onHide","aria-labelledby","Tab","defaultActiveKey","Header","closeButton","Title","Item","eventKey","Body","Content","Pane","handleModalClose","httpLink","createHttpLink","uri","authLink","setContext","_","headers","authorization","client","ApolloClient","link","concat","cache","InMemoryCache","App","ApolloProvider","ReactDOM","render","StrictMode","navigator","serviceWorker","register","then"],"mappings":"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","file":"static/js/main.a024af1d.chunk.js","sourcesContent":["import { gql } from \"@apollo/client\";\n\nexport const LOGIN_USER = gql`\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n`;\n\nexport const ADD_USER = gql`\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n        email\n      }\n    }\n  }\n`;\n","import decode from \"jwt-decode\";\n\nclass AuthService {\n  getProfile() {\n    return decode(this.getToken());\n  }\n\n  loggedIn() {\n    const token = this.getToken();\n    return !!token && !this.isTokenExpired(token); // handwaiving here\n  }\n\n  isTokenExpired(token) {\n    try {\n      const decoded = decode(token);\n      if (decoded.exp < Date.now() / 1000) {\n        window.login = false;\n        document.getElementById(\"root\").className = \"splash\";\n        return true;\n      } else {\n        window.login = true;\n        document.getElementById(\"root\").className = \"menu\";\n        return false;\n      }\n    } catch (err) {\n      return false;\n    }\n  }\n\n  getToken() {\n    return localStorage.getItem(\"id_token\");\n  }\n\n  login(idToken) {\n    document.getElementById(\"root\").className = \"menu\";\n    window.login = true;\n    localStorage.setItem(\"id_token\", idToken);\n    window.location.assign(\"/\");\n  }\n\n  logout() {\n    document.getElementById(\"root\").className = \"splash\";\n    window.login = false;\n    localStorage.removeItem(\"id_token\");\n    localStorage.removeItem(\"email\");\n    localStorage.removeItem(\"password\");\n    localStorage.setItem(\"bh_database\", \"false\");\n    window.location.assign(\"/\");\n  }\n}\n\nexport default new AuthService();\n","import React, { useState, useEffect } from \"react\";\nimport { Form, Button, Alert } from \"react-bootstrap\";\nimport { useMutation } from \"@apollo/client\";\nimport { ADD_USER } from \"../utils/mutations\";\nimport Auth from \"../utils/auth\";\n\nconst SignupForm = () => {\n  // set initial form state\n  const [userFormData, setUserFormData] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n  });\n\n  // set state for form validation\n  const [validated] = useState(false);\n  // set state for alert\n  const [showAlert, setShowAlert] = useState(false);\n\n  const [addUser, { error, data }] = useMutation(ADD_USER);\n\n  useEffect(() => {\n    if (error) {\n      setShowAlert(true);\n    } else {\n      setShowAlert(false);\n    }\n  }, [error]);\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n\n    setUserFormData({\n      ...userFormData,\n      [name]: value,\n    });\n  };\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n\n    // check if form has everything (as per react-bootstrap docs)\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    console.log(userFormData);\n    try {\n      const { data } = await addUser({\n        variables: { ...userFormData },\n      });\n      Auth.login(data.addUser.token);\n    } catch (err) {\n      console.error(err);\n    }\n\n    setUserFormData({\n      username: \"\",\n      email: \"\",\n      password: \"\",\n    });\n  };\n\n  return (\n    <>\n      {/* This is needed for the validation functionality above */}\n      <Form noValidate validated={validated} onSubmit={handleFormSubmit}>\n        {/* show alert if server response is bad */}\n        <Alert\n          dismissible\n          onClose={() => setShowAlert(false)}\n          show={showAlert}\n          variant=\"danger\"\n        >\n          Something went wrong with your signup!\n        </Alert>\n\n        <Form.Group>\n          <Form.Label htmlFor=\"username\">Username</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Your username\"\n            name=\"username\"\n            onChange={handleInputChange}\n            value={userFormData.username}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Username is required!\n          </Form.Control.Feedback>\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label htmlFor=\"email\">Email</Form.Label>\n          <Form.Control\n            type=\"email\"\n            placeholder=\"Your email address\"\n            name=\"email\"\n            onChange={handleInputChange}\n            value={userFormData.email}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Email is required!\n          </Form.Control.Feedback>\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label htmlFor=\"password\">Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Your password\"\n            name=\"password\"\n            onChange={handleInputChange}\n            value={userFormData.password}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Password is required!\n          </Form.Control.Feedback>\n        </Form.Group>\n        <Button\n          disabled={\n            !(\n              userFormData.username &&\n              userFormData.email &&\n              userFormData.password\n            )\n          }\n          type=\"submit\"\n          variant=\"success\"\n        >\n          Submit\n        </Button>\n      </Form>\n    </>\n  );\n};\n\nexport default SignupForm;\n","// see SignupForm.js for comments\nimport React, { useState } from \"react\";\nimport { Form, Button, Alert } from \"react-bootstrap\";\nimport { useMutation } from \"@apollo/client\";\nimport { LOGIN_USER } from \"../utils/mutations\";\nimport Auth from \"../utils/auth\";\nimport $ from \"jquery\";\n\nconst LoginForm = () => {\n  const [userFormData, setUserFormData] = useState({ email: \"\", password: \"\" });\n  const [validated] = useState(false);\n  const [showAlert, setShowAlert] = useState(false);\n  const [login, { error }] = useMutation(LOGIN_USER);\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    setUserFormData({ ...userFormData, [name]: value });\n  };\n\n  const handleFormSubmit = async (event) => {\n    event.preventDefault();\n\n    const form = event.currentTarget;\n    if (form.checkValidity() === false) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    try {\n      const { data } = await login({\n        variables: { ...userFormData },\n      });\n\n      Auth.login(data.login.token);\n\n      $.ajax({\n        url:\n          \"https://www.haulsmart.com/apis/haulsmartlogin.php?email=\" +\n          userFormData.email +\n          \"&password=\" +\n          userFormData.password,\n        dataType: \"text\",\n        type: \"GET\",\n        async: false,\n        success: function (text) {\n          localStorage.setItem(\"bh_database\", text);\n          if (text == \"true\") {\n            window.email = userFormData.email;\n            window.password = userFormData.password;\n            localStorage.setItem(\"email\", userFormData.email);\n            localStorage.setItem(\"password\", userFormData.password);\n          }\n        },\n      });\n    } catch (err) {\n      console.error(err);\n      setShowAlert(true);\n    }\n\n    setUserFormData({\n      username: \"\",\n      email: \"\",\n      password: \"\",\n    });\n  };\n\n  return (\n    <>\n      <Form noValidate validated={validated} onSubmit={handleFormSubmit}>\n        <Alert\n          dismissible\n          onClose={() => setShowAlert(false)}\n          show={showAlert}\n          variant=\"danger\"\n        >\n          Something went wrong with your login credentials!\n        </Alert>\n        <Form.Group>\n          <Form.Label htmlFor=\"email\">Email</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Your email\"\n            name=\"email\"\n            onChange={handleInputChange}\n            value={userFormData.email}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Email is required!\n          </Form.Control.Feedback>\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label htmlFor=\"password\">Password</Form.Label>\n          <Form.Control\n            type=\"password\"\n            placeholder=\"Your password\"\n            name=\"password\"\n            onChange={handleInputChange}\n            value={userFormData.password}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Password is required!\n          </Form.Control.Feedback>\n        </Form.Group>\n        <Button\n          disabled={!(userFormData.email && userFormData.password)}\n          type=\"submit\"\n          variant=\"success\"\n        >\n          Submit\n        </Button>\n      </Form>\n    </>\n  );\n};\n\nexport default LoginForm;\n","import $ from \"jquery\";\n\nconst syncData = () => {\n  alert(\"Syncing with HaulSmart\");\n  var url =\n    \"https://www.haulsmart.com/apis/blastpolygons.php?email=\" +\n    window.email +\n    \"&password=\" +\n    window.password;\n  console.log(url);\n  $.ajax({\n    url: url,\n    dataType: \"json\",\n    type: \"GET\",\n    async: true,\n    success: function (geojson) {\n      console.log(geojson);\n      var store = window.db\n        .transaction(\"polygons\", \"readwrite\")\n        .objectStore(\"polygons\");\n      var req;\n      req = store.clear();\n      try {\n        req = store.add(geojson);\n      } catch (e) {\n        throw e;\n      }\n      req.onsuccess = function (evt) {\n        alert(\"Insertion in DB successful\");\n      };\n      req.onerror = function () {\n        alert(\"Insertion in DB Failed \", this.error);\n      };\n    },\n  });\n  //$.getJSON(\n  //  \"https://www.haulsmart.com/apis/holedata.php?id=so_gw_295_08\",\n  //  function (geojson) {\n  //    for (var j = 0; j < geojson.features.length; j++) {\n  //      var coords = geojson.features[j].geometry.coordinates;\n  //      var obj = {\n  //        id: j,\n  //        blast: geojson.features[j].properties.Blast,\n  //        hole: geojson.features[j].properties.Hole,\n  //        holetype: geojson.features[j].properties.HoleType,\n  //        collar: geojson.features[j].properties.Collar,\n  //        toe: geojson.features[j].properties.Toe,\n  //        angle: geojson.features[j].properties.Angle,\n  //        dipped: geojson.features[j].properties.Dipped,\n  //        lat: coords[1],\n  //        lng: coords[0],\n  //      };\n  //      var store = window.db\n  //        .transaction(window.DB_STORE_NAME, \"readwrite\")\n  //        .objectStore(window.DB_STORE_NAME);\n  //      var req;\n  //      try {\n  //        req = store.add(obj);\n  //      } catch (e) {\n  //        if (e.name === \"DataCloneError\")\n  //          console.log(\n  //            \"This engine doesn't know how to clone a Blob, \" + \"use Firefox\"\n  //          );\n  //        throw e;\n  //      }\n  //      req.onsuccess = function (evt) {\n  //        console.log(\"Insertion in DB successful\");\n  //      };\n  //      req.onerror = function () {\n  //        console.error(\"addHole error\", this.error);\n  //      };\n  //    }\n  //  }\n  //);\n};\n\nexport default syncData;\n","import $ from \"jquery\";\n\nconst workSheet = () => {\n  var store = window.db\n    .transaction(window.DB_STORE_NAME, \"readwrite\")\n    .objectStore(window.DB_STORE_NAME);\n  var req;\n  try {\n    req = store.getAll();\n  } catch (e) {\n    if (e.name == \"DataCloneError\")\n      console.log(\n        \"This engine doesn't know how to clone a Blob, \" + \"use Firefox\"\n      );\n    throw e;\n  }\n  req.onsuccess = function (evt) {\n    console.log(\"Reading DB successful\");\n    window.holedata = req.result;\n    var html =\n      \"<img src='images/btn-close@2x.png' style='cursor:pointer;margin-left:5px;width:50px;height:50px;' onclick=\\\"$('#worksheet').hide();$('#lpanel').hide();$('#panelout').show();$('#panelin').hide()\\\" ><label style='margin-left:20px;font:bold 30px Arial'><?php echo $id;?></label><div style='text-align:left;font:Bold 30px Arial'></div><br/>\";\n    html +=\n      \"<input type='button' value='Hole Sort' class='btn' style='margin-left:10px;width:150px;font:normal 20px Arial' onclick=\\\"holesort()\\\" /><input type='button' value='GPS Sort' class='btn' style='margin-left:10px;width:150px;font:normal 20px Arial' onclick=\\\"gpssort()\\\" /><br/><div><table id='diptable' style='margin-left:10px;text-align:center;font:normal 20px Arial'><br/>\";\n    html +=\n      \"<tr><th style='width:70px' >Hole No</th><th style='width:70px'>Design Depth</th><th style='width:70px'>Redrills</th><th style='width:70px'>Dipped Depth</th><th style='width:70px'>Water</th><th style='width:70px'>Backfill</th><th style='width:70px'>Stemmed</th><th style='width:70px'>Comments</th><tr/>\";\n\n    for (var i = 0; i < window.holedata.length; i++) {\n      var depth = (window.holedata[i].collar - window.holedata[i].toe).toFixed(\n        1\n      );\n      var difference = window.holedata[i].dipped - depth;\n      if (window.holedata[i].dipped * 1 === 0) {\n        var bgcolor = \"white\";\n      } else {\n        if (difference > -0.3 && difference < 0.3) {\n          var bgcolor = \"green\";\n        } else {\n          if (difference > -0.5 && difference < 0.5) {\n            var bgcolor = \"orange\";\n          } else {\n            var bgcolor = \"red\";\n          }\n        }\n      }\n      html +=\n        \"<tr><td><input type='text' id='hid\" +\n        window.holedata[i].id +\n        \"' readonly  class='save' readonly style='width:70px;font:normal 20px Arial' value='\" +\n        window.holedata[i].hole +\n        \"'/></td><td><input type='number' id='ded\" +\n        window.holedata[i].id +\n        \"' class='save' readonly style='width:70px;font:normal 20px Arial' value='\" +\n        depth +\n        \"'/></td><td><input type='number' id='red\" +\n        window.holedata[i].id +\n        \"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><input type='number' id='did\" +\n        window.holedata[i].id +\n        \"' class='save' style='width:70px;font:normal 20px Arial;background-color:\" +\n        bgcolor +\n        \"' value='\" +\n        window.holedata[i].dipped +\n        \"'/></td><td><input type='number' id='wat\" +\n        window.holedata[i].id +\n        \"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><input type='number' id='baf\" +\n        window.holedata[i].id +\n        \"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><input type='number' id='stm\" +\n        window.holedata[i].id +\n        \"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><textarea id='com\" +\n        window.holedata[i].id +\n        \"' class='save' style='width:300px;height:25px;font:normal 20px Arial' ></textarea></td><tr/>\";\n    }\n\n    html += \"</table></div>\";\n    $(\"#worksheet\").html(html).show();\n\n    $(\".save\").bind(\"change\", function () {\n      var str = $(this).attr(\"id\");\n      var hid = str.substr(3);\n      hid = hid * 1;\n      var store = window.db\n        .transaction(window.DB_STORE_NAME, \"readwrite\")\n        .objectStore(window.DB_STORE_NAME);\n      var req;\n      try {\n        req = store.get(hid);\n      } catch (e) {\n        if (e.name == \"DataCloneError\")\n          console.log(\n            \"This engine doesn't know how to clone a Blob, \" + \"use Firefox\"\n          );\n        throw e;\n      }\n      req.onsuccess = function (evt) {\n        console.log(\"Reading DB successful\");\n        console.log(req.result);\n        console.log(req.result.hole);\n        window.holeObj = req.result;\n        var depth = req.result.collar * 1 - req.result.toe * 1;\n        console.log(window.holeObj.dipped);\n        $(\"#dippedval\").val(window.holeObj.dipped);\n\n        var dipped = $(\"#did\" + hid).val() * 1;\n        console.log(dipped);\n        window.holeObj.dipped = dipped;\n        var depth = window.holeObj.collar * 1 - window.holeObj.toe * 1;\n        depth = depth.toFixed(1);\n        var difference = dipped - depth;\n        console.log(window.holeObj);\n\n        try {\n          req = store.put(window.holeObj);\n        } catch (e) {\n          if (e.name == \"DataCloneError\")\n            console.log(\n              \"This engine doesn't know how to clone a Blob, \" + \"use Firefox\"\n            );\n          throw e;\n        }\n        req.onsuccess = function (evt) {\n          console.log(\"Writing to DB successful\");\n          //uploadHole(window.holeObj);\n        };\n        req.onerror = function () {\n          console.error(\"read db error\", this.error);\n        };\n      };\n      req.onerror = function () {\n        console.error(\"read db error\", this.error);\n      };\n    });\n  };\n  req.onerror = function () {\n    console.error(\"read db error\", this.error);\n  };\n};\n\nexport default workSheet;\n","const uploadData = () => {\n  alert(\"uploading data\");\n};\n\nexport default uploadData;\n","const installPWA = async () => {\n  const butInstall = document.getElementById(\"buttonInstall\");\n\n  console.log(\"👍\", \"installBtn-clicked\");\n  const promptEvent = window.deferredPrompt;\n  if (!promptEvent) {\n    return;\n  }\n  // Show the install prompt.\n  promptEvent.prompt();\n  // Show the result\n  const result = await promptEvent.userChoice;\n  console.log(\"👍\", \"userChoice\", result);\n  // Reset the deferred prompt variable, prompt() can only be used once.\n  window.deferredPrompt = null;\n  butInstall.style.display = \"none\";\n};\n\nexport default installPWA;\n","const uploadCSV = () => {\n  alert(\"uploading data\");\n};\n\nexport default uploadCSV;\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, Nav, Container, Modal, Tab, Button } from \"react-bootstrap\";\nimport SignUpForm from \"./SignupForm\";\nimport LoginForm from \"./LoginForm\";\nimport syncData from \"../utils/syncdata\";\nimport workSheet from \"../utils/worksheet\";\nimport uploadData from \"../utils/uploaddata\";\nimport installPWA from \"../utils/installpwa\";\nimport uploadCSV from \"../utils/uploadcsv\";\nimport Auth from \"../utils/auth\";\nimport { isMobile } from \"react-device-detect\";\n\nconst AppNavbar = () => {\n  // set modal display state\n  const [showModal, setShowModal] = useState(false);\n\n  React.useEffect(() => {\n    const butInstall = document.getElementById(\"buttonInstall\");\n\n    window.addEventListener(\"beforeinstallprompt\", (event) => {\n      console.log(\"👍\", \"beforeinstallprompt\", event);\n      // Store the event so it can be used later.\n      window.deferredPrompt = event;\n      // Remove the 'hidden' class from the install anchor tag.\n      butInstall.style.display = \"table-cell\";\n    });\n\n    window.addEventListener(\"appinstalled\", (event) => {\n      console.log(\"👍\", \"appinstalled\", event);\n      // Clear the prompt\n      window.deferredPrompt = null;\n      butInstall.style.display = \"none\";\n    });\n  }, []);\n\n  return (\n    <>\n      <Navbar expand=\"lg\">\n        <Container fluid>\n          <Navbar.Toggle aria-controls=\"navbar\" />\n          <Navbar.Collapse id=\"navbar\">\n            <Nav className=\"ml-auto\">\n              {/* if user is logged in show saved books and logout */}\n              {Auth.loggedIn() ? (\n                <>\n                  <Nav.Link onClick={() => syncData()}>\n                    <div className=\"option\">Sync Data to HaulSmart</div>\n                  </Nav.Link>\n                  <Nav.Link onClick={() => uploadData()}>\n                    <div className=\"option\">Sync Data to Cloud</div>\n                  </Nav.Link>\n                  <Nav.Link onClick={() => workSheet()}>\n                    <div className=\"option\">Worksheet</div>\n                  </Nav.Link>\n                  <Nav.Link onClick={() => uploadCSV()}>\n                    <div id=\"uploadcsv\" className=\"option\">\n                      Upload CSV\n                    </div>\n                  </Nav.Link>\n                  <Nav.Link onClick={Auth.logout}>\n                    <div className=\"option\">Logout</div>\n                  </Nav.Link>\n                </>\n              ) : (\n                <>\n                  <Nav.Link onClick={() => installPWA()}>\n                    <div id=\"buttonInstall\" className=\"installoption\">\n                      Install APP\n                    </div>\n                  </Nav.Link>\n                  <Nav.Link id=\"loginlink\" onClick={() => setShowModal(true)}>\n                    <div className=\"option\">Login/SignUp</div>\n                  </Nav.Link>\n                </>\n              )}\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n      {/* set modal data up */}\n      <Modal\n        size=\"lg\"\n        show={showModal}\n        onHide={() => setShowModal(false)}\n        aria-labelledby=\"signup-modal\"\n      >\n        {/* tab container to do either signup or login component */}\n        <Tab.Container defaultActiveKey=\"login\">\n          <Modal.Header closeButton>\n            <Modal.Title id=\"signup-modal\">\n              <Nav variant=\"pills\">\n                <Nav.Item>\n                  <Nav.Link eventKey=\"login\">Login</Nav.Link>\n                </Nav.Item>\n                <Nav.Item>\n                  <Nav.Link eventKey=\"signup\">Sign Up</Nav.Link>\n                </Nav.Item>\n              </Nav>\n            </Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <Tab.Content>\n              <Tab.Pane eventKey=\"login\">\n                <LoginForm handleModalClose={() => setShowModal(false)} />\n              </Tab.Pane>\n              <Tab.Pane eventKey=\"signup\">\n                <SignUpForm handleModalClose={() => setShowModal(false)} />\n              </Tab.Pane>\n            </Tab.Content>\n          </Modal.Body>\n        </Tab.Container>\n      </Modal>\n    </>\n  );\n};\n\nexport default AppNavbar;\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider,\n  createHttpLink,\n} from \"@apollo/client\";\nimport { setContext } from \"@apollo/client/link/context\";\nimport Navbar from \"./components/Navbar\";\n\nconst httpLink = createHttpLink({\n  uri: \"/graphql\",\n});\n\nconst authLink = setContext((_, { headers }) => {\n  const token = localStorage.getItem(\"id_token\");\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : \"\",\n    },\n  };\n});\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache(),\n});\n\nfunction App() {\n  return (\n    <ApolloProvider client={client}>\n      <Router>\n        <>\n          <Navbar />\n          <Switch>\n            <Route />\n          </Switch>\n        </>\n      </Router>\n    </ApolloProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n//serviceWorker.register();\n\nif (\"serviceWorker\" in navigator) {\n  navigator.serviceWorker\n    .register(\"./serviceWorker.js\")\n    .then((register) => console.log(register));\n}\n"],"sourceRoot":""}