<!doctype html><html lang="en"><head><meta name="viewport" content="initial-scale=1,user-scalable=no"/><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><link rel="shortcut icon" href="/favicon.png" type="image/x-icon"/><link rel="icon" href="/favicon.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="Blasthole_Dipping"/><link rel="apple-touch-icon" href="/logo192.png"/><link rel="manifest" href="/manifest.json"/><title>Drill & Blast QAQC</title><link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/><link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css"/><link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css"/><script src="https://kit.fontawesome.com/05c6b543c0.js" crossorigin="anonymous"></script><script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script><script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/hosuaby/Leaflet.SmoothMarkerBouncing@v2.0.0/dist/bundle.js" crossorigin="anonymous"></script><script src="https://code.jquery.com/jquery-1.10.2.js"></script><script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script><script src="jquery-csv.js"></script><link href="/static/css/2.3661fc73.chunk.css" rel="stylesheet"><link href="/static/css/main.32331596.chunk.css" rel="stylesheet"></head><body><div id="map"></div><div id="root" class="splash"></div><div class="custom-popup" id="popup"></div><div id="message"></div><div id="worksheet"></div><div id="locationbuttons"><img src="/images/btn-Locate@2x.png" width="50" height="50" class="mapbutton" title="Centre User Position" onclick="centerUser()" style="cursor:pointer"/> <img src="/images/btn-Centre-Map@2x.png" width="50" height="50" class="mapbutton" title="Centre Site Position" onclick="centerSite()" style="cursor:pointer"/></div><div id="uploadform" class="uploads"><label>UPLOAD DRILL PATTERN :</label><br/><br/><label>Ensure CSV columns:</label><br/><label>Hole_No,Lng,Lat,Collar,Toe,Dia,Brg,Angle</label><br/><br/><input id="pattern" placeholder="Input Pattern Name" style="width:200px;font:normal 18px Arial"/><br/><br/><form id="uploadForm" name="uploadForm" action="#" enctype="multipart/form-data"><input id="csv" name="csv" type="file" style="margin-left:0;font:normal 16px arial"/><br/><br/><input id="CSVUpload" type="submit" class="btn btn-default" name="Submit" value="Upload"/> <input type="button" value="Cancel" class="btn" onclick='$("#uploadform").hide()'/></form></div><div id="summary"><label id="summary_pattern"></label><br/><br/><label id="design_holes">Design Holes:</label><br/><label id="design_mtrs">Design Mtrs:</label><br/><label id="dipped_holes">Dipped Holes:</label><br/><label id="dipped_mtrs">Dipped Metres:</label><br/></div><div class="modal"></div><script>if(window.login=!1,window.email,window.password,window.holedata,null==localStorage.getItem("sitelat")||null==localStorage.getItem("sitelat")){}let dipped_holes,dipped_mtrs,currentpos,currentPositionMarker,currentlat,currentlng,holeIcon,redIcon,orangeIcon,greenIcon,blastIcon,sitelat=1*localStorage.getItem("sitelat"),sitelng=1*localStorage.getItem("sitelng"),wpid=!1,markerscales=[1,2,3,4,5,6,7,8,9,10,14,18,22,25,28,32,35,38,40,42,44,46,48,50],currentposmarker=new L.LayerGroup,holemarkers=new L.LayerGroup,patternmarkers=new L.LayerGroup,polygons=new L.LayerGroup;function getIcon(e,o,t,n){return L.icon({id:"",event_id:"",iconUrl:e,iconSize:o,iconAnchor:t,popupAnchor:n})}function initMap(){map=L.map("map",{minZoom:3,maxZoom:23}).setView([sitelat,sitelng],18),map.zoomControl.setPosition("bottomright"),navigator.onLine,map.on("zoomend",(function(){let e=map.getZoom();markerscales[e];map.getZoom()<21?$(".leaflet-tooltip-own").css("display","none"):$(".leaflet-tooltip-own").css("display","block"),map.getZoom()>16&&map.getZoom()<21?$(".patternmarkers").css("display","block"):$(".patternmarkers").css("display","none")})),holeIcon=L.Icon.extend({iconUrl:"/images/bh_white.png?n=1",iconSize:[10,10],iconAnchor:[5,5]}),redIcon=L.Icon.extend({iconUrl:"/images/bh_red.png?n=1",iconSize:[10,10],iconAnchor:[5,5]}),orangeIcon=L.Icon.extend({iconUrl:"/images/bh_orange.png?n=1",iconSize:[10,10],iconAnchor:[5,5]}),greenIcon=L.Icon.extend({iconUrl:"/images/bh_green.png?n=1",iconSize:[10,10],iconAnchor:[5,5]}),blastIcon=L.Icon.extend({iconUrl:"/images/bh_blue.png?n=1",iconSize:[2,2],iconAnchor:[1,1]}),1==window.login&&openDb()}function displayAndWatch(e){setCurrentPosition(e)}function locError(e){switch(e.code){case e.PERMISSION_DENIED:break;case e.POSITION_UNAVAILABLE:case e.TIMEOUT:case e.UNKNOWN_ERROR:wpid=navigator.geolocation.getCurrentPosition(displayAndWatch,locError,{maximumAge:0,timeout:1e3,enableHighAccuracy:!0})}}function setCurrentPosition(e){currentlat=e.coords.latitude,currentlng=e.coords.longitude,currentposmarker.clearLayers(),currentPositionMarker=L.marker([e.coords.latitude,e.coords.longitude],{icon:L.icon({iconUrl:"/images/pos.png",iconSize:[2,2],iconAnchor:[1,1]}),tap:!1}).addTo(map),currentposmarker.addLayer(currentPositionMarker)}function showMessage(e){$("#message").html(e).css({display:"table-cell"}).show(),setTimeout((function(){$("#message").html("").hide()}),3e3)}window.customOptions={className:"custom-popup"},map,$(document).ready((function(){initMap(),navigator.geolocation?wpid=navigator.geolocation.getCurrentPosition(displayAndWatch,locError,{maximumAge:0,timeout:1e3,enableHighAccuracy:!0}):showMessage("Your browser does not support the Geolocation API"),$("#summary_pattern").html(localStorage.getItem("pattern")),"false"===localStorage.getItem("bh_database")&&$("#uploadcsv").hide()}));var blastKey,geojson=[];function getPolygons(){if(window.login=!0){var e,o=window.db.transaction("polygons","readwrite").objectStore("polygons");try{e=o.getAll()}catch(e){console.log(e)}e.onsuccess=function(o){delete e.result[0].id,geojson=e.result[0],L.geoJson(geojson,{style:areaStyle,onEachFeature:onEachFeature}).addTo(map);for(var t=L.latLngBounds(),n=0;n<geojson.features.length;n++){if("Polygon"===geojson.features[n].geometry.type)for(var r=geojson.features[n].geometry.coordinates[0],a=0;a<r.length;a++)void 0!==r[a][1]&&t.extend(L.latLng(r[a][1],r[a][0]));if(void 0!==geojson.features[n].properties.lat){var i=L.marker([geojson.features[n].properties.lat,geojson.features[n].properties.lng],{icon:L.icon({iconUrl:"/images/bh_blue.png?n=1",iconSize:[2,2],iconAnchor:[1,1]}),tap:!1}).addTo(map);i.bindTooltip(geojson.features[n].properties.Block,{permanent:!0,direction:"right",offset:[0,0],className:"patternmarkers"}),patternmarkers.addLayer(i)}}map.fitBounds(t),map.panTo(t.getCenter())},e.onerror=function(){console.error("read db error",this.error)}}}function onEachFeature(e,o){o.on({click:onClick})}function areaStyle(e){return{strokeColor:e.properties.strokeColor,fillColor:e.properties.fillColor,fillOpacity:0,weight:1,opacity:1}}function onClick(e){blastKey=e.target.feature.properties.Key,getPattern("so_gw_307_032"),$("#summary_pattern").html("so_gw_307_032")}function getBounds(e){for(var o=L.latLngBounds(),t=0;t<geojson.features.length;t++)if(geojson.features[t].properties.Key===e&&"Polygon"==geojson.features[t].geometry.type)for(var n=geojson.features[t].geometry.coordinates[0],r=0;r<n.length;r++)o.extend(L.latLng(n[r][1],n[r][0]));map.fitBounds(o),map.panTo(o.getCenter())}function onHoleClick(e){getHole(e)}function patternStyle(e){return{i:e.properties.fillColor,fillColor:e.properties.fillColor,fillOpacity:0,weight:1,opacity:1}}function openDb(){var e=indexedDB.open(window.DB_NAME,window.DB_VERSION);e.onsuccess=function(e){window.db=this.result,getPolygons(),null===localStorage.getItem("pattern")||void 0===localStorage.getItem("pattern")||getPattern(localStorage.getItem("pattern"))},e.onerror=function(e){console.error("openDb:",e.target.errorCode)},e.onupgradeneeded=function(e){e.currentTarget.result.createObjectStore("polygons",{keyPath:"id",autoIncrement:!0});var o=e.currentTarget.result.createObjectStore(window.DB_STORE_NAME,{keyPath:"id",autoIncrement:!0});o.createIndex("id","id",{unique:!0}),o.createIndex("blast","blast",{unique:!1}),o.createIndex("hole","hole",{unique:!1}),o.createIndex("holetype","holetype",{unique:!1}),o.createIndex("collar","collar",{unique:!1}),o.createIndex("toe","toe",{unique:!1}),o.createIndex("angle","angle",{unique:!1}),o.createIndex("dipped","dipped",{unique:!1}),o.createIndex("lat","lat",{unique:!1}),o.createIndex("lng","lng",{unique:!1})}}function addHole(e,o,t,n,r,a,i,l,d){var s,p={blast:e,hole:o,holetype:t,collar:n,toe:r,angle:a,dipped:i,lat:l,lng:d},c=window.db.transaction(window.DB_STORE_NAME,"readwrite").objectStore(window.DB_STORE_NAME);try{s=c.add(p)}catch(e){throw"DataCloneError"==e.name&&console.log("This engine doesn't know how to clone a Blob, use Firefox"),e}s.onsuccess=function(e){},s.onerror=function(){console.error("addHole error",this.error)}}function getPattern(e){if(null!==e||void 0!==e){holemarkers.clearLayers();var o,t=window.db.transaction(window.DB_STORE_NAME,"readwrite").objectStore(window.DB_STORE_NAME);try{o=t.getAll()}catch(e){throw"DataCloneError"==e.name&&console.log("This engine doesn't know how to clone a Blob, use Firefox"),e}o.onsuccess=function(t){let n=o.result;patterndata=o.result;var r=L.latLngBounds();design_holes=0,design_mtrs=0,dipped_holes=0,dipped_mtrs=0;for(var a=0;a<n.length;a++)if(n[a].blast==e){r.extend(L.latLng(n[a].lat,n[a].lng)),design_holes+=1;var i=(n[a].collar-n[a].toe).toFixed(1);design_mtrs+=1*i;var l=n[a].dipped-i;if(1*n[a].dipped==0)var d=L.icon({iconUrl:"/images/bh_white.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});else if(dipped_holes+=1,dipped_mtrs+=1*n[a].dipped,l>-.3&&l<.3)d=L.icon({iconUrl:"/images/bh_green.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});else if(l>-.5&&l<.5)d=L.icon({iconUrl:"/images/bh_orange.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});else d=L.icon({iconUrl:"/images/bh_red.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});var s="<div><label>Pattern: "+n[a].blast+"</label><br/><label>Hole: "+n[a].hole+"</label><br/><label>Type: "+n[a].holetype+"</label><br/><label>Depth: "+i+"</label><br/><label>Dipped:</label><input id='dippedval' autocomplete='off' style='margin-left:10px;width:100px' value=''><br/><br/><input type='button' value='OK' style='width:200px' onclick=\"setHole()\"/><br/><br/><input type='button' value='Cancel' style='width:200px' onclick=\"map.closePopup()\"/>",p=L.marker([n[a].lat,n[a].lng],{icon:d,id:n[a].id,hole:n[a].hole,type:n[a].holetype,collar:n[a].collar,toe:n[a].toe,dipped:n[a].dipped,tap:!1}).addTo(map);p.myID=n[a].id,p.on("click",(function(e){onHoleClick(e.target.myID)})).bindTooltip(n[a].hole,{permanent:!0,direction:"right",offset:[10,0],className:"leaflet-tooltip-own"}).bindPopup(s,window.customOptions),holemarkers.addLayer(p)}map.fitBounds(r),map.panTo(r.getCenter()),$("#design_holes").html("Design Holes: "+design_holes),$("#design_mtrs").html("Design Mtrs: "+design_mtrs.toFixed(1)),$("#dipped_holes").html("Dipped Holes: "+dipped_holes),$("#dipped_mtrs").html("Dipped Metres: "+dipped_mtrs.toFixed(1)),$("#summary").show(),holemarkers.eachLayer((function(e){var o=1*e.options.Collar-1*e.options.Toe;e.options.dipped}))},o.onerror=function(){console.error("read db error",this.error)}}}function getHole(e){window.alreadydipped=0,window.alreadydippedmtrs=0;var o,t=window.db.transaction(window.DB_STORE_NAME,"readwrite").objectStore(window.DB_STORE_NAME);try{o=t.get(e)}catch(e){throw"DataCloneError"==e.name&&console.log("This engine doesn't know how to clone a Blob, use Firefox"),e}o.onsuccess=function(e){window.holeObj=o.result,window.holeObj.dipped>0&&(alreadydipped=1,alreadydippedmtrs=window.holeObj.dipped);o.result.collar,o.result.toe;$("#dippedval").val(window.holeObj.dipped)},o.onerror=function(){console.error("read db error",this.error)}}function setHole(){var e=1*$("#dippedval").val();(alreadydipped=1)&&(dipped_holes-=1,dipped_mtrs-=window.alreadydippedmtrs),dipped_holes+=1,dipped_mtrs+=e,$("#dipped_holes").html("Dipped Holes: "+dipped_holes),$("#dipped_mtrs").html("Dipped Metres: "+dipped_mtrs.toFixed(1)),window.holeObj.dipped=e;var o=1*window.holeObj.collar-1*window.holeObj.toe,t=e-(o=o.toFixed(1));if(holemarkers.eachLayer((function(e){e.options.hole===window.holeObj.hole&&holemarkers.removeLayer(e)})),0===e)var n=L.icon({iconUrl:"/images/bh_white.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});else if(t>-.3&&t<.3)n=L.icon({iconUrl:"/images/bh_green.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});else if(t>-.5&&t<.5)n=L.icon({iconUrl:"/images/bh_orange.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});else n=L.icon({iconUrl:"/images/bh_red.png?n=1",iconSize:[10,10],iconAnchor:[5,5]});var r="<div><label>Pattern: "+window.holeObj.blast+"</label><br/><label>Hole: "+window.holeObj.hole+"</label><br/><label>Type: "+window.holeObj.holetype+"</label><br/><label>Depth: "+o+"</label><br/><label>Dipped:</label><input id='dippedval' autocomplete='off' style='margin-left:10px;width:100px' value=''><br/><br/><input type='button' value='OK' style='width:200px' onclick=\"setHole()\"/><br/><br/><input type='button' value='Cancel' style='width:200px' onclick=\"map.closePopup()\"/>",a=L.marker([window.holeObj.lat,window.holeObj.lng],{icon:n,id:window.holeObj.id,hole:window.holeObj.hole,type:window.holeObj.holetype,collar:window.holeObj.collar,toe:window.holeObj.toe,dipped:window.holeObj.dipped,tap:!1}).addTo(map);a.myID=window.holeObj.id,a.on("click",(function(e){onHoleClick(e.target.myID)})).bindPopup(r,window.customOptions),holemarkers.addLayer(a),window.alreadydipped=0,window.alreadydippedmtrs=0;var i,l=window.db.transaction(window.DB_STORE_NAME,"readwrite").objectStore(window.DB_STORE_NAME);try{i=l.put(window.holeObj)}catch(e){throw"DataCloneError"==e.name&&console.log("This engine doesn't know how to clone a Blob, use Firefox"),e}i.onsuccess=function(e){map.closePopup(),uploadHole(window.holeObj)},i.onerror=function(){console.error("read db error",this.error)}}function uploadHole(){"true"==localStorage.getItem("bh_database")&&(!0===navigator.onLine?$.ajax({url:"https://www.haulsmart.com/apis/setHole.php",type:"POST",data:{json:JSON.stringify(window.holeObj)},timeout:1e4,error:function(){},dataType:"text",success:function(e){showMessage("Hole updated on HaulSmart"),map.closePopup()}}):showMessage("OFFLINE: Hole not updated on HaulSmart"))}function uploadPattern(){!0===navigator.onLine&&$.ajax({url:"https://www.haulsmart.com/apis/setPattern.php",type:"POST",crossDomain:!0,data:{json:JSON.stringify(patterdata)},timeout:1e4,error:function(){},dataType:"text",success:function(e){showMessage(e)}})}function holesort(){window.holedata.sort((function(e,o){var t=e.hole.toUpperCase(),n=o.hole.toUpperCase();return t<n?-1:t>n?1:0})),sortWorksheet()}function gpssort(){for(var e=0;e<window.holedata.length;e++){var o=getDistance([currentlat,currentlng],[window.holedata[e].lat,window.holedata[e].lng]);window.holedata[e].distance=o}window.holedata.sort((function(e,o){return parseFloat(e.distance)-parseFloat(o.distance)})),sortWorksheet()}function sortWorksheet(){var e="<img src='images/btn-close@2x.png' style='cursor:pointer;margin-left:5px;width:50px;height:50px;' onclick=\"$('#worksheet').hide();$('#lpanel').hide();$('#panelout').show();$('#panelin').hide()\" ><label style='margin-left:20px;font:bold 30px Arial'><?php echo $id;?></label><div style='text-align:left;font:Bold 30px Arial'></div><br/>";e+="<input type='button' value='Hole Sort' class='btn' style='margin-left:10px;width:150px;font:normal 20px Arial' onclick=\"holesort()\" /><input type='button' value='GPS Sort' class='btn' style='margin-left:10px;width:150px;font:normal 20px Arial' onclick=\"gpssort()\" /><br/><div><table id='diptable' style='margin-left:10px;text-align:center;font:normal 20px Arial'><br/>",e+="<tr><th style='width:70px' >Hole No</th><th style='width:70px'>Design Depth</th><th style='width:70px'>Redrills</th><th style='width:70px'>Dipped Depth</th><th style='width:70px'>Water</th><th style='width:70px'>Backfill</th><th style='width:70px'>Stemmed</th><th style='width:70px'>Comments</th><tr/>";for(var o=0;o<window.holedata.length;o++){var t=(window.holedata[o].collar-window.holedata[o].toe).toFixed(1),n=window.holedata[o].dipped-t;if(1*window.holedata[o].dipped==0)var r="white";else if(n>-.3&&n<.3)r="green";else if(n>-.5&&n<.5)r="orange";else r="red";e+="<tr><td><input type='text' id='hid"+window.holedata[o].id+"' readonly  class='save' readonly style='width:70px;font:normal 20px Arial' value='"+window.holedata[o].hole+"'/></td><td><input type='number' id='ded"+window.holedata[o].id+"' class='save' readonly style='width:70px;font:normal 20px Arial' value='"+t+"'/></td><td><input type='number' id='red"+window.holedata[o].id+"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><input type='number' id='did"+window.holedata[o].id+"' class='save' style='width:70px;font:normal 20px Arial;background-color:"+r+"' value='"+window.holedata[o].dipped+"'/></td><td><input type='number' id='wat"+window.holedata[o].id+"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><input type='number' id='baf"+window.holedata[o].id+"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><input type='number' id='stm"+window.holedata[o].id+"' class='save' style='width:70px;font:normal 20px Arial' value=''/></td><td><textarea id='com"+window.holedata[o].id+"' class='save' style='width:300px;height:25px;font:normal 20px Arial' ></textarea></td><tr/>"}e+="</table></div>",$("#worksheet").html(e).show(),$(".save").bind("change",(function(){let e=$(this).attr("id").substr(3);e*=1;let o,t=1*$(this).attr("dipped"),n=window.db.transaction(window.DB_STORE_NAME,"readwrite").objectStore(window.DB_STORE_NAME);try{o=n.get(e)}catch(e){throw"DataCloneError"==e.name&&console.log("This engine doesn't know how to clone a Blob, use Firefox"),e}o.onsuccess=function(r){window.holeObj=o.result,$("#dippedval").val(window.holeObj.dipped);let a=1*$("#did"+e).val();window.holeObj.dipped=a;let i=1*window.holeObj.collar-1*window.holeObj.toe;i=i.toFixed(1);t>0&&(window.dipped_holes=window.dipped_holes-1,window.dipped_mtrs,window.dipped_mtrs),window.dipped_holes+=1,window.dipped_mtrs+=a,$("#dipped_holes").html("Dipped Holes: "+window.dipped_holes),$("#dipped_mtrs").html("Dipped Metres: "+window.dipped_mtrs.toFixed(1)),$(this).attr("dipped",a);try{o=n.put(window.holeObj)}catch(e){throw"DataCloneError"==e.name&&console.log("This engine doesn't know how to clone a Blob, use Firefox"),e}o.onsuccess=function(e){},o.onerror=function(){console.error("read db error",this.error)}},o.onerror=function(){console.error("read db error",this.error)}}))}function getDistance(e,o){var t=toRadian(e[1]),n=toRadian(e[0]),r=toRadian(o[1]),a=toRadian(o[0]),i=a-n,l=r-t,d=Math.pow(Math.sin(i/2),2)+Math.cos(n)*Math.cos(a)*Math.pow(Math.sin(l/2),2);return 6371*(2*Math.asin(Math.sqrt(d)))*1e3}function toRadian(e){return e*Math.PI/180}function centerUser(){map.setView(new L.LatLng(currentlat,currentlng),18)}function centerSite(){map.setView(new L.LatLng(currentlat,currentlng),18)}setInterval((function(){navigator.geolocation&&(wpid=navigator.geolocation.getCurrentPosition(displayAndWatch,locError,{maximumAge:0,timeout:1e3,enableHighAccuracy:!0}))}),5e3),window.db,window.DB_NAME="blasts",window.DB_VERSION=1,window.DB_STORE_NAME="patterns",window.holeObj,window.alreadydipped,window.alreadydippedmtrs,"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)}))})),$("#uploadForm").submit((function(e){e.preventDefault(),e.stopPropagation();var o=document.getElementById("csv").files[0],t=document.getElementById("csv").value;t.slice(0,12);if("csv"===t.substr(t.lastIndexOf(".")+1)){var n=new FileReader;n.readAsText(o),n.onload=function(e){var o="Hole,Lng,Lat,Collar,Toe,Dia,Brg,Angle\n"+e.target.result,t=JSON.stringify($.csv.toObjects(o));let n=$("#pattern").val();var r="https://www.haulsmart.com/apis/drillcsvjson.php?id="+n+"&username="+localStorage.getItem("email")+"&password="+localStorage.getItem("password")+"&lat="+currentlat+"&lng="+currentlng;$.ajax({url:r,type:"POST",dataType:"json",crossDomain:!0,data:{json:t},success:function(e){localStorage.setItem("pattern",n),holemarkers.clearLayers();var o=L.latLngBounds();let t=e[0];L.geoJson(e[1],{style:areaStyle,onEachFeature:onEachFeature}).addTo(map);for(var r=0;r<t.features.length;r++){var a=t.features[r].geometry.coordinates;o.extend([a[1],a[0]]);var i=(t.features[r].properties.Collar-t.features[r].properties.Toe).toFixed(1),l="<div><label>Pattern: "+t.features[r].properties.Blast+"</label><br/><label>Hole: "+t.features[r].properties.Hole+"</label><br/><label>Type: "+t.features[r].properties.HoleType+"</label><br/><label>Depth: "+i+"</label><br/><label>Dipped:</label><input id='dippedval' autocomplete='off' style='margin-left:10px;width:100px' value=''><br/><br/><input type='button' value='OK' style='width:200px' onclick=\"setHole()\"/><br/><br/><input type='button' value='Cancel' style='width:200px' onclick=\"map.closePopup()\"/>",d=L.marker([a[1],a[0]],{icon:L.icon({iconUrl:"/images/bh_white.png?n=1",iconSize:[10,10],iconAnchor:[5,5]}),id:t.features[r].properties.Hole,type:t.features[r].properties.HoleType,collar:t.features[r].properties.Collar,toe:t.features[r].properties.Toe,dia:t.features[r].properties.Dia,tap:!1}).addTo(map);d.myID=r,d.on("click",(function(e){onHoleClick(e.target.myID)})).bindPopup(l),holemarkers.addLayer(d),addHole(t.features[r].properties.Blast,t.features[r].properties.Hole,t.features[r].properties.HoleType,t.features[r].properties.Collar,t.features[r].properties.Toe,t.features[r].properties.Angle,t.features[r].properties.Dipped,a[1],a[0])}map.fitBounds(o),map.panTo(o.getCenter()),$("#uploadform").hide()}})}}else showMessage("Please ensure you upload a csv file")}))</script><script>!function(e){function t(t){for(var n,l,i=t[0],f=t[1],a=t[2],p=0,s=[];p<i.length;p++)l=i[p],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&s.push(o[l][0]),o[l]=0;for(n in f)Object.prototype.hasOwnProperty.call(f,n)&&(e[n]=f[n]);for(c&&c(t);s.length;)s.shift()();return u.push.apply(u,a||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,i=1;i<r.length;i++){var f=r[i];0!==o[f]&&(n=!1)}n&&(u.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},o={1:0},u=[];function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var i=this.webpackJsonpclient=this.webpackJsonpclient||[],f=i.push.bind(i);i.push=t,i=i.slice();for(var a=0;a<i.length;a++)t(i[a]);var c=f;r()}([])</script><script src="/static/js/2.1f51cf36.chunk.js"></script><script src="/static/js/main.5dc623a5.chunk.js"></script></body></html>